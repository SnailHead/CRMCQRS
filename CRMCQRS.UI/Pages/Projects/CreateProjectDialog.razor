@using Microsoft.AspNetCore.Components
@using MudBlazor
<MudForm Model="@_model" @ref="@_form" Validation="@(_projectModelValidator.ValidateValue)" ValidationDelay="0">
    <MudDialog>
        <DialogContent>
            <MudGrid>
                <MudItem md="12" sm="12" xs="12">
                    <MudTextField @bind-Value="_model.Title" For="@(() => _model.Title)" Immediate="true"/>
                </MudItem>
                <MudItem md="12" sm="12" xs="12">
                    <MudTextField @bind-Value="_model.Info" For="@(() => _model.Info)" Immediate="true" Lines="5"/>
                </MudItem>
                <MudItem md="12" sm="12" xs="12">
                    <MudSelect T="string" @bind-SelectedValues="_selectedTags" @bind-Value="_model.TagNames" For="@(() => _model.TagNames)" MultiSelection="true" Variant="Variant.Outlined">
                        @foreach (var value in _tags)
                        {
                            <MudSelectItem T="string" Value="value.Title">
                                <MudChip Class="ma-2" Style="@($"color: ${value.Color}")" Variant="@(value.IsFilled ? Variant.Filled : Variant.Outlined)">@value.Title</MudChip>
                            </MudSelectItem>
                        }
                    </MudSelect>
                </MudItem>

                <MudTextField @bind-Value="_model.Id" DisableUnderLine="true" For="@(() => _model.Id)" Immediate="true" InputType="InputType.Hidden" Label="@null"/>
                <MudItem Class="d-flex flex-grow-1 gap-4 justify-center" md="12" sm="12" xs="12">

                </MudItem>
            </MudGrid>

        </DialogContent>
        <DialogActions>
            <MudButton Class="ml-auto" Color="Color.Primary" OnClick="@(async () => await Submit())" Variant="Variant.Filled">Сохранить</MudButton>
            <MudButton OnClick="Cancel">Отмена</MudButton>
        </DialogActions>
    </MudDialog>
</MudForm>